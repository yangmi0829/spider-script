{"id":3,"name":"9点海湾中学3号场20-22","url":"https://bawtt.ydmap.cn/booking/schedule/104173?salesItemId=104689","links":"https://bawtt.ydmap.cn/booking/schedule/104015?salesItemId=104768","create_time":"2023/7/20 22:44:14","version":"0.3.1","containJudge":false,"desc":"","inputParameters":[{"id":0,"name":"urlList_0","nodeId":1,"nodeName":"打开网页","value":"https://bawtt.ydmap.cn/booking/schedule/104015?salesItemId=104768","desc":"要采集的网址列表，多行以\\n分开","type":"string","exampleValue":"https://bawtt.ydmap.cn/booking/schedule/104015?salesItemId=104768"}],"outputParameters":[],"graph":[{"index":0,"id":0,"parentId":0,"type":-1,"option":0,"title":"root","sequence":[1,25,2,9,22,10,11,21,13,14,16,15,17,18,19,20],"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0},"isInLoop":false},{"id":1,"index":1,"parentId":0,"type":0,"option":1,"title":"打开网页","sequence":[],"isInLoop":false,"position":0,"parameters":{"useLoop":false,"xpath":"","wait":2,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"url":"https://bawtt.ydmap.cn/booking/schedule/104173?salesItemId=104689","links":"https://bawtt.ydmap.cn/booking/schedule/104015?salesItemId=104768","maxWaitTime":10,"scrollType":0,"scrollCount":1,"scrollWaitTime":1}},{"id":3,"index":2,"parentId":0,"type":1,"option":8,"title":"等待场地可选","sequence":[],"isInLoop":false,"position":2,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"loopType":"5","pathList":"","textList":"","code":"return document.getElementsByClassName('noOpen').length;","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":"1","breakCode":"return true","breakCodeWaitTime":0}},{"id":-1,"index":3,"parentId":2,"type":2,"option":9,"title":"判断条件","sequence":[4],"isInLoop":true,"position":0,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0}},{"id":-1,"parentId":3,"index":4,"type":3,"option":10,"title":"条件分支","sequence":[],"isInLoop":true,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"class":"5","value":"","code":"return document.getElementsByTagName('td')[0].classList.length === 1","waitTime":0},"position":0},{"id":-1,"parentId":3,"index":5,"type":3,"option":10,"title":"条件分支","sequence":[],"isInLoop":true,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"class":0,"value":"","code":"","waitTime":0},"position":1},{"id":-1,"index":6,"parentId":2,"type":0,"option":2,"title":"点击元素","sequence":[],"isInLoop":true,"position":0,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"/html/body/div[1]/div[1]/div[1]/section[1]/div[1]/div[3]/div[1]/div[3]/table[1]/tbody[1]/tr[5]/td[3]","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":1,"maxWaitTime":10,"paras":[]}},{"id":-1,"index":7,"parentId":2,"type":0,"option":2,"title":"点击元素","sequence":[],"isInLoop":true,"position":0,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"/html/body/div[1]/div[1]/div[1]/section[1]/div[1]/div[4]/div[2]/button[1]","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":1,"maxWaitTime":10,"paras":[]}},{"id":-1,"index":8,"parentId":2,"type":1,"option":8,"title":"等待协议弹窗","sequence":[],"isInLoop":true,"position":0,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":1,"loopType":"5","pathList":"","textList":"","code":"return document.getElementsByClassName('el-message-box__wrapper')[0].style.display === 'none'","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":4,"index":9,"parentId":0,"type":0,"option":2,"title":"选择时间段1","sequence":[],"isInLoop":false,"position":3,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//table/tbody/tr[last()]/td[3]","wait":0,"beforeJS":"console.time(\"耗时\");\nconsole.log(new Date());","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":6,"index":10,"parentId":0,"type":0,"option":2,"title":"点击下一步","sequence":[],"isInLoop":false,"position":5,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//div[@class=\"wrapper-right\"]/button","wait":0,"beforeJS":"let s =  window.setTimeout; window.setTimeout = (fn, t) => {  return s(fn,  100)}","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":7,"index":11,"parentId":0,"type":1,"option":8,"title":"等待协议弹窗显示","sequence":[],"isInLoop":false,"position":6,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":"0","scrollCount":1,"scrollWaitTime":1,"loopType":"5","pathList":"","textList":"","code":"return document.getElementsByClassName('el-message-box__wrapper')[0].style.display === 'none';","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":-1,"index":12,"parentId":0,"type":0,"option":2,"title":"协议弹窗到底部","sequence":[],"isInLoop":false,"position":6,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":2,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":1,"maxWaitTime":10,"paras":[]}},{"id":9,"index":13,"parentId":0,"type":1,"option":8,"title":"等待协议弹窗确认按钮可点击","sequence":[],"isInLoop":false,"position":8,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"loopType":"5","pathList":"","textList":"","code":"return document.getElementsByClassName('el-message-box__btns')[0].lastChild.textContent !== '接受'","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":10,"index":14,"parentId":0,"type":0,"option":2,"title":"点击接受","sequence":[],"isInLoop":false,"position":9,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//div[@class=\"el-message-box__btns\"]/button[2]","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":12,"index":15,"parentId":0,"type":0,"option":2,"title":"点击下一步","sequence":[],"isInLoop":false,"position":11,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//div[@class=\"wrapper-right\"]/button","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"setTimeout(() => {\nconsole.log(arguments[0]);\narguments[0].click();\n}, 200);","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":11,"index":16,"parentId":0,"type":1,"option":8,"title":"等待下一步按钮展示","sequence":[],"isInLoop":false,"position":10,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"loopType":"5","pathList":"","textList":"","code":"return !location.href.includes('service') || document.getElementsByClassName('wrapper-right')[0].lastChild.className.includes('disabled')","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":13,"index":17,"parentId":0,"type":1,"option":8,"title":"等待选择人员显示","sequence":[],"isInLoop":false,"position":12,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"loopType":"5","pathList":"","textList":"","code":"return !document.getElementsByClassName('contact-item').length","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":14,"index":18,"parentId":0,"type":0,"option":2,"title":"选择人员1","sequence":[],"isInLoop":false,"position":13,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//li[@class=\"contact-item\"]/label/span","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":15,"index":19,"parentId":0,"type":0,"option":2,"title":"选择人员2","sequence":[],"isInLoop":false,"position":14,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//li[@class=\"contact-item\"][2]/label/span","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":16,"index":20,"parentId":0,"type":0,"option":2,"title":"锁单","sequence":[],"isInLoop":false,"position":15,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//div[@class=\"fixed-bt-bd\"]/div/div[3]/button","wait":3600,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"console.timeEnd(\"耗时\");\nconsole.log(new Date());","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":8,"index":21,"parentId":0,"type":0,"option":5,"title":"协议弹窗到底部","sequence":[],"isInLoop":false,"position":7,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"codeMode":0,"code":"console.log('执行滑动脚本');\ndocument.getElementsByClassName('el-message-box__message')[0].scroll(0, 99999)","waitTime":0,"recordASField":0}},{"id":5,"index":22,"parentId":0,"type":0,"option":2,"title":"选择时间段2","sequence":[],"isInLoop":false,"position":4,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//table/tbody/tr[last()-1]/td[3]","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"maxWaitTime":10,"paras":[]}},{"id":-1,"index":23,"parentId":0,"type":1,"option":8,"title":"判断表格渲染完成","sequence":[],"isInLoop":false,"position":1,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":2,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":0,"loopType":"5","pathList":"","textList":"","code":"return !document.getElementsByTagName('tr').length","waitTime":0,"exitCount":0,"historyWait":2,"breakMode":0,"breakCode":"","breakCodeWaitTime":0}},{"id":-1,"index":24,"parentId":0,"type":0,"option":5,"title":"自定义操作","sequence":[],"isInLoop":false,"position":7,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"","wait":0,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"codeMode":0,"code":"alert('测试')","waitTime":0,"recordASField":0}},{"id":2,"index":25,"parentId":0,"type":0,"option":2,"title":"选择最新日期","sequence":[],"isInLoop":false,"position":1,"parameters":{"history":1,"tabIndex":0,"useLoop":false,"xpath":"//div[contains(@class, \"slider-box-datetime\")]/ul/li[last()]","wait":2,"beforeJS":"","beforeJSWaitTime":0,"afterJS":"","afterJSWaitTime":0,"scrollType":0,"scrollCount":1,"scrollWaitTime":1,"maxWaitTime":10,"paras":[]}}]}